\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{stdsetup}

\RequirePackage{etoolbox}               % logic & booleans


%%   +-----------+
%% ----- setup ----- %% -------------------------------------------------------
%%   +-----------+


%% ----- declare options

% load math setup
\providebool{@loadmath}\boolfalse{@loadmath}
\declareOption{math}{ \booltrue{@loadmath} }
% load text setup
\providebool{@loadtext}\boolfalse{@loadtext}
\declareOption{text}{ \booltrue{@loadtext} }
% load figures setup
\providebool{@loadfigures}\boolfalse{@loadfigures}
\declareOption{figures}{ \booltrue{@loadfigures} }

% whether to load subcaption
\providebool{@enumerating}
\booltrue   {@enumerating}
\DeclareOption{noenum}{ \boolfalse{@enumerating} }

% enumitem options
\DeclareOption{enumitem}{
    \PassOptionToPackage{\CurrentOption}{enumitem}
}

% fallback
\DeclareOption*{
    \ClassWarning{stdsetup}{Unknown option '\CurrentOption'}
}

%% execute default options

\ExecuteOptions{enumitem={inline}}

%% process given options

\ProcessOptions\relax


%%   +--------------+
%% ----- packages ----- %% ----------------------------------------------------
%%   +--------------+


% text
\ifbool{@loadtext}{
    \RequirePackage{enumitem}   % more control over lists
}{ }

% math
\ifbool{@loadmath}{
    \RequirePackage{amsmath}            % ams math
    \RequirePackage{amsfonts}           % ams math fonts
    \RequirePackage{amssymb}            % ams math symbols
    \RequirePackage{amsthm}             % ams theorems
    \RequirePackage{mathtools}          % more math!
    \RequirePackage{thmtools}           % more theorems!

    \RequirePackage{algorithm2e}        % typesetting algorithms

    \RequirePackage{mathletters}        % shorts for mathletters
}{ }

% graphics
\ifbool{@loadfigures}{
    \RequirePackage{graphicx}           % insert images
    \RequirePackage{subcaption}         % subfigures and subtables
}{ }


%%   +-------------------+
%% ----- theorem setup ----- %% -----------------------------------------------
%%   +-------------------+


\ifbool{@loadmath}{

    \newcommand{\theoremheaderindent}{-2.0em}
    \newcommand{\theoremindent}      { 0.0em}
    \newcommand{\theoremsep}         { 0.8em}

    \newtheoremstyle{bodyindented}
        {\theoremsep} % space above
        {\theoremsep} % space below
        {\addtolength{\@totalleftmargin}{\theoremindent}
            \addtolength{\linewidth}{-\theoremindent}
            \parshape 1 \theoremindent \linewidth} % bodyfont
        {} % indent
        {\hspace{\theoremheaderindent}\bfseries} % header font
        {:} % punctuation between head and body
        {0.8em} % space after header
        {} % custom header (default empty)
    \theoremstyle{bodyindented}

    \newtheorem{theorem}    {Theorem}[section]     % label within sections
    \newtheorem{definition} [theorem]{Definition}  % label same as theorem
    \newtheorem{lemma}      [theorem]{Lemma}       % label same as theorem
    \newtheorem{proposition}[theorem]{Proposition} % label same as theorem
    \newtheorem{example}    {Example}[section]     % label within section

}{ }


%%   +---------------+
%% ----- text setup ----- %% --------------------------------------------------
%%   +---------------+

\ifbool{@loadtext}{

    %% ----- commands

    % quoting
    \newcommand{\qte}  [1]{``#1''}
    \newcommand{\itqte}[1]{\qte{\textit{#1}}}

    %% ----- environments

    \ifbool{@enumerating}{
        %% list environment with roman numerals
        \newenvironment{romanenum}% roman numerals
            {\begin{enumerate}[label=\emph{\roman*})]}% before
            {\end{enumerate}}% after
        \newenvironment{romanenuminline}% inline roman numerals
            {\begin{enumerate*}[label=\emph{\roman*})]}% before
            {\end{enumerate*}}% after
    }{ }

}

%%   +----------------+
%% ----- math setup ----- %% --------------------------------------------------
%%   +----------------+

\ifbool{@loadmath}{

    \newcommand{\HP} {\mathcal{HP}}% halting problem
    \newcommand{\DHP}{\mathcal{DHP}}% diagonal halting problem

    % math operators
    \DeclareMathOperator{\seg}{seg}
    \DeclareMathOperator{\ord}{ord}

    % quantifiers
    \newcommand{\existsall}{\ensuremath% EXISTS over FOR ALL
        \raisebox{0.2em}{\( \overset{\displaystyle\exists}{\underset{\displaystyle\forall}{}} \)}}
    \newcommand{\allexists}{\ensuremath% FOR ALL over EXISTS
        \raisebox{0.2em}{\( \overset{\displaystyle\forall}{\underset{\displaystyle\exists}{}} \)}}

    % define equals
    \newcommand{\defeq}{\vcentcolon=}% : before =
    \newcommand{\eqdef}{=\vcentcolon}% : after =
    \newcommand{\define}{\overset{\text{\scriptsize{def}}}{=}}% def above =

    % renewing the restriction symbol since it has to much left whitespace
    % !!! NOTE: requires amssymb package !!!
    \let\@oldrestr\restriction% store old restriction
    \renewcommand{\restriction}{\!\!\@oldrestr}% new restriction

    % pairs in angles
    \newcommand{\pair}  [2]{\langle #1, #2\rangle}
    \newcommand{\LRpair}[2]{\left\langle #1, #2\right\rangle}

}{ }

\endinput

